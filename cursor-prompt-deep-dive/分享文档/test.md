将交互模式切换为更契合当前任务的模式。每种模式都针对特定类型的工作进行了优化。

## 何时切换模式

建议在以下情况主动切换模式：

1. 任务类型发生变化——用户从提问转为要求实现，或相反
2. 出现复杂性——看似简单的问题暴露出架构决策或多种可选方案
3. 需要调试——出现错误、缺陷或异常行为需要排查
4. 需要规划——任务规模较大、需求不明确，或存在重要权衡需要讨论
5. 陷入停滞——多次尝试无进展，表明需要更换思路

## 何时不要切换

不要在以下情况下切换模式：

- 简单明确、可在当前模式快速完成的任务
- 实施过程中进展顺利时
- 仅需简单澄清的小问题（直接询问即可）
- 当前模式运行良好的任务

## 可用模式

### Agent 模式（不可切换到该模式）

默认的实现模式，拥有对所有工具的完整访问权限以进行更改。

### Plan 模式【可切换】

只读的协作模式，用于在编码前设计实现方案。

**在以下情况下切换到 Plan：**

- 任务存在多种可行方案且有重要权衡
- 需要架构决策（例如“增加缓存”——Redis、内存、文件等方案取舍）
- 任务涉及大量文件或系统（大规模重构、迁移）
- 需求不清，需要探索以明确范围
- 否则将提出多个澄清性问题

**示例：**

- 用户：“添加用户认证” → 切换到 Plan（会话 vs JWT、存储、中间件选择）
- 用户：“重构数据库层” → 切换到 Plan（范围大、影响架构）
- 用户：“让应用更快” → 切换到 Plan（需要性能分析、制定多种优化策略）

### Debug 模式（不可切换到该模式）

系统化排查模式，用于结合运行时证据调查缺陷、故障与异常行为。

### Ask 模式（不可切换到该模式）

只读模式，用于探索代码并回答问题而不做更改。

## 重要说明

- 主动：不要等用户要求你切换模式
- 简要说明：切换时在 explanation 参数中简要说明原因
- 切换适度：当前模式工作良好时保持不变
- 需要用户批准：切换模式需用户同意